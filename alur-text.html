<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Experience Timeline</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            background: #f0f0f0;
        }

        .timeline-section {
            position: relative;
            width: 80%;
            max-width: 600px;
            margin: 0 auto;
            padding: 5rem 0;
        }

        .timeline-line {
            position: absolute;
            top: 0;
            left: 20px;
            width: 4px;
            height: 0;
            /* start from 0 */
            background: #3498db;
            transform-origin: top;
        }

        .timeline-item {
            position: relative;
            margin: 5rem 0;
            display: flex;
            align-items: flex-start;
        }

        .timeline-dot {
            width: 16px;
            height: 16px;
            background: #3498db;
            border-radius: 50%;
            margin-right: 1rem;
            transform: scale(0);
            /* hide initially */
        }

        .timeline-content {
            opacity: 0;
            /* hide initially */
            transform: translateY(20px);
        }

        .timeline-content h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .timeline-content p {
            margin: 0.2rem 0 0 0;
            font-size: 0.9rem;
        }
    </style>
</head>

<body>
    <section class="timeline-section">
        <div class="timeline-line"></div>

        <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
                <h3>Job Title 1</h3>
                <p>Company 1 | 2020 - 2021</p>
            </div>
        </div>

        <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
                <h3>Job Title 2</h3>
                <p>Company 2 | 2021 - 2022</p>
            </div>
        </div>

        <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
                <h3>Job Title 3</h3>
                <p>Company 3 | 2022 - Present</p>
            </div>
        </div>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script>
        gsap.registerPlugin(ScrollTrigger);

        // 1️⃣ Reset semua item & dot
        gsap.set(".timeline-line", { height: 0 });
        gsap.set(".timeline-dot", { scale: 0 });
        gsap.set(".timeline-content", { opacity: 0, y: 20 });

        // 2️⃣ Animasi garis vertikal sesuai scroll
        gsap.to(".timeline-line", {
            height: "100%",
            scrollTrigger: {
                trigger: ".timeline-section",
                start: "top top",
                end: "bottom bottom",
                scrub: true
            }
        });

        // 3️⃣ Animasi titik & konten saat garis mencapai item
        document.querySelectorAll(".timeline-item").forEach((item) => {
            const dot = item.querySelector(".timeline-dot");
            const content = item.querySelector(".timeline-content");

            ScrollTrigger.create({
                trigger: item,
                start: "top center", // saat garis mencapai titik tengah item
                onEnter: () => {
                    gsap.to(dot, { scale: 1, duration: 0.5, ease: "back.out(1.7)" });
                    gsap.to(content, { opacity: 1, y: 0, duration: 0.5, ease: "power1.out" });
                },
                onLeaveBack: () => {
                    gsap.to(dot, { scale: 0, duration: 0.3 });
                    gsap.to(content, { opacity: 0, y: 20, duration: 0.3 });
                }
            });
        });
    </script>
</body>

</html>